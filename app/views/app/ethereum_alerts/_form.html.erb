<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" id="alert-modal">
  <div class="bg-slate-800 border border-slate-700 rounded-lg w-full max-w-xl mx-auto" onclick="event.stopPropagation()">
    <div class="p-6">
      <!-- Modal Header -->
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-white">
          <%= @ethereum_alert.persisted? ? 'Edit Alert' : 'Create Alert' %>
        </h2>
        <%= link_to app_ethereum_alerts_path, 
            class: "text-gray-400 hover:text-white transition-colors",
            data: { turbo_frame: "_top" } do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        <% end %>
      </div>

      <!-- Form -->
      <%= form_with model: [@ethereum_alert], url: @ethereum_alert.persisted? ? app_ethereum_alert_path(@ethereum_alert) : app_ethereum_alerts_path, local: false, data: { turbo_frame: "alert_form" } do |form| %>
        <div class="space-y-4">
          <!-- Address Hash Field -->
          <div>
            <%= form.label :address_hash, class: "block text-sm font-medium text-white mb-2" do %>
              Ethereum Address
              <span class="text-red-400">*</span>
            <% end %>
            <%= form.text_field :address_hash, 
                class: "w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all",
                placeholder: "0x742d35Cc6634C0532925a3b8D0Ac7e797d2B5E1C" %>
            <% if @ethereum_alert.errors[:address_hash].any? %>
              <p class="mt-1 text-sm text-red-400">
                <%= @ethereum_alert.errors[:address_hash].first %>
              </p>
            <% end %>
            <p class="mt-1 text-xs text-gray-400">
              Enter the Ethereum address you want to monitor for transactions.
            </p>
          </div>

          <!-- Webhook URL Field -->
          <div>
            <%= form.label :webhook_url, class: "block text-sm font-medium text-white mb-2" do %>
              Webhook URL
              <span class="text-red-400">*</span>
            <% end %>
            <%= form.url_field :webhook_url, 
                class: "w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all",
                placeholder: "https://your-api.com/webhook/ethereum-alerts" %>
            <% if @ethereum_alert.errors[:webhook_url].any? %>
              <p class="mt-1 text-sm text-red-400">
                <%= @ethereum_alert.errors[:webhook_url].first %>
              </p>
            <% end %>
            <p class="mt-1 text-xs text-gray-400">
              URL where we'll send a POST request when transactions are detected.
            </p>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex space-x-3 mt-6 pt-4 border-t border-slate-600">
          <%= link_to app_ethereum_alerts_path, 
              class: "flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-center rounded font-medium transition-colors",
              data: { turbo_frame: "_top" } do %>
            Cancel
          <% end %>
          
          <%= form.submit (@ethereum_alert.persisted? ? 'Update Alert' : 'Create Alert'), 
              class: "flex-1 px-4 py-2 bg-gradient-to-r from-yellow-500 to-red-500 hover:from-yellow-600 hover:to-red-600 text-white text-center rounded font-medium transition-all duration-200 hover:cursor-pointer" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<!-- Close modal when clicking outside -->
<script>
  document.getElementById('alert-modal').addEventListener('click', function(e) {
    if (e.target === this) {
      window.location.href = '<%= app_ethereum_alerts_path %>';
    }
  });
  
  // Close modal with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      window.location.href = '<%= app_ethereum_alerts_path %>';
    }
  });
</script>